<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Summary</title>
    <link rel="stylesheet" href="Summary.css">
</head>
<body>
    <!-- Edit Modal (Hidden by default) -->
    <div class="modal-overlay" id="editModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">STUDENT ATTENDANCE EDITOR</h2>
                <button class="modal-close" id="closeModal">Ã—</button>
            </div>
            <div class="modal-content">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search student name..." id="studentSearch">
                </div>
                <div class="attendance-options">
                    <button class="attendance-option option-present">MARK PRESENT</button>
                    <button class="attendance-option option-late">MARK LATE</button>
                    <button class="attendance-option option-absent">MARK ABSENT</button>
                </div>
                <div class="students-container" id="modalStudentsList">
                    <!-- Students will be populated by JavaScript -->
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="modalCancel">Cancel</button>
                <button class="modal-btn modal-btn-save" id="modalSave">Save Changes</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ATTENDANCE SUMMARY</h1>
            <div class="header-buttons">
                <button class="btn btn-edit" id="editBtn">Edit</button>
                <button class="btn btn-save">Save</button>
                <button class="btn btn-cancel">Discard</button>
            </div>
        </div>

        <div class="instructor-info">
            <div class="instructor-row">
                <div class="instructor-profile">
                    <div class="instructor-avatar">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Ccircle cx='30' cy='30' r='30' fill='%23E5E7EB'/%3E%3Ccircle cx='30' cy='24' r='9' fill='%236B7280'/%3E%3Cpath d='M15 45c0-8.25 6.75-15 15-15s15 6.75 15 15' fill='%236B7280'/%3E%3C/svg%3E" alt="Instructor Avatar">
                    </div>
                    <div class="instructor-details">
                        <div class="instructor-name">Instructor's Name</div>
                        <div class="instructor-title">IT/CS Instructor</div>
                    </div>
                </div>
                <div class="subject-info">
                    <div class="subject-code">IT104</div>
                    <div class="subject-label">Subject</div>
                </div>
                <div class="course-info">
                    <div class="course-code">BSIT-2C</div>
                    <div class="course-label">Course & Section</div>
                </div>
            </div>
        </div>

        <div class="time-section">
            <div class="time-item">
                <div class="time-value">1:03pm</div>
                <div class="time-label">Time Started</div>
            </div>
            <div class="duration-container">
                <div class="duration-main">
                    <div class="duration-value">3h:00m:00s</div>
                    <div class="duration-label">Class Duration</div>
                </div>
                <div class="threshold-container">
                    <div class="threshold-value">00h:15m:00s</div>
                    <div class="threshold-label">Late Threshold</div>
                </div>
            </div>
            <div class="time-item">
                <div class="time-value">4:03pm</div>
                <div class="time-label">Time Ended</div>
            </div>
        </div>

        <div class="attendance-grid">
            <div class="attendance-column column-present">
                <div class="column-header">
                    <div class="attendance-count count-present">29/36</div>
                    <div class="attendance-label">Students Present</div>
                </div>
                <div class="student-list" id="presentList">
                    <!-- Students will be populated by JavaScript -->
                </div>
            </div>

            <div class="attendance-column column-late">
                <div class="column-header">
                    <div class="attendance-count count-late">10/36</div>
                    <div class="attendance-label">Students Late</div>
                </div>
                <div class="student-list" id="lateList">
                    <!-- Students will be populated by JavaScript -->
                </div>
            </div>

            <div class="attendance-column column-absent">
                <div class="column-header">
                    <div class="attendance-count count-absent">7/36</div>
                    <div class="attendance-label">Students Absent</div>
                </div>
                <div class="student-list" id="absentList">
                    <!-- Students will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script 
    
    >// Sample student data with attendance status
        const allStudents = [
            { name: 'Student Name 1', status: 'present' },
            { name: 'Student Name 2', status: 'present' },
            { name: 'Student Name 3', status: 'late' },
            { name: 'Student Name 4', status: 'absent' },
            { name: 'Student Name 5', status: 'present' },
            { name: 'Student Name 6', status: 'late' },
            { name: 'Student Name 7', status: 'present' },
            { name: 'Student Name 8', status: 'absent' },
            { name: 'Student Name 9', status: 'present' },
            { name: 'Student Name 10', status: 'late' },
            { name: 'Student Name 11', status: 'present' },
            { name: 'Student Name 12', status: 'absent' },
            { name: 'Student Name 13', status: 'present' },
            { name: 'Student Name 14', status: 'late' },
            { name: 'Student Name 15', status: 'present' },
            { name: 'Student Name 16', status: 'present' },
            { name: 'Student Name 17', status: 'absent' },
            { name: 'Student Name 18', status: 'present' },
            { name: 'Student Name 19', status: 'late' },
            { name: 'Student Name 20', status: 'present' },
            { name: 'Student Name 21', status: 'present' },
            { name: 'Student Name 22', status: 'absent' },
            { name: 'Student Name 23', status: 'present' },
            { name: 'Student Name 24', status: 'late' },
            { name: 'Student Name 25', status: 'present' },
            { name: 'Student Name 26', status: 'present' },
            { name: 'Student Name 27', status: 'absent' },
            { name: 'Student Name 28', status: 'present' },
            { name: 'Student Name 29', status: 'late' },
            { name: 'Student Name 30', status: 'present' },
            { name: 'Student Name 31', status: 'present' },
            { name: 'Student Name 32', status: 'absent' },
            { name: 'Student Name 33', status: 'present' },
            { name: 'Student Name 34', status: 'late' },
            { name: 'Student Name 35', status: 'present' },
            { name: 'Student Name 36', status: 'present' }
        ];

        // Populate initial lists
        const students = {
            present: allStudents.filter(s => s.status === 'present').map(s => s.name),
            late: allStudents.filter(s => s.status === 'late').map(s => s.name),
            absent: allStudents.filter(s => s.status === 'absent').map(s => s.name)
        };

        function createStudentItem(name, index) {
            const studentItem = document.createElement('div');
            studentItem.className = 'student-item';
            
            const avatar = document.createElement('div');
            avatar.className = 'student-avatar';
            avatar.textContent = name.charAt(0).toUpperCase();
            
            const nameDiv = document.createElement('div');
            nameDiv.className = 'student-name';
            nameDiv.textContent = name;
            
            studentItem.appendChild(avatar);
            studentItem.appendChild(nameDiv);
            
            return studentItem;
        }

        function populateStudentList(containerId, studentList) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            studentList.forEach((name, index) => {
                const studentItem = createStudentItem(name, index);
                container.appendChild(studentItem);
            });
        }

        function createModalStudentItem(student) {
            const studentItem = document.createElement('div');
            studentItem.className = 'modal-student-item';
            
            const studentInfo = document.createElement('div');
            studentInfo.className = 'modal-student-info';
            
            const avatar = document.createElement('div');
            avatar.className = 'modal-student-avatar';
            avatar.textContent = student.name.charAt(0).toUpperCase();
            
            const nameDiv = document.createElement('div');
            nameDiv.className = 'modal-student-name';
            nameDiv.textContent = student.name;
            
            studentInfo.appendChild(avatar);
            studentInfo.appendChild(nameDiv);
            
            const checkboxes = document.createElement('div');
            checkboxes.className = 'attendance-checkboxes';
            
            // Present checkbox
            const presentWrapper = document.createElement('div');
            presentWrapper.className = 'checkbox-wrapper';
            const presentCheckbox = document.createElement('div');
            presentCheckbox.className = `attendance-checkbox checkbox-present ${student.status === 'present' ? 'checked' : ''}`;
            presentCheckbox.dataset.status = 'present';
            presentCheckbox.dataset.student = student.name;
            presentWrapper.appendChild(presentCheckbox);
            
            // Late checkbox
            const lateWrapper = document.createElement('div');
            lateWrapper.className = 'checkbox-wrapper';
            const lateCheckbox = document.createElement('div');
            lateCheckbox.className = `attendance-checkbox checkbox-late ${student.status === 'late' ? 'checked' : ''}`;
            lateCheckbox.dataset.status = 'late';
            lateCheckbox.dataset.student = student.name;
            lateWrapper.appendChild(lateCheckbox);
            
            // Absent checkbox
            const absentWrapper = document.createElement('div');
            absentWrapper.className = 'checkbox-wrapper';
            const absentCheckbox = document.createElement('div');
            absentCheckbox.className = `attendance-checkbox checkbox-absent ${student.status === 'absent' ? 'checked' : ''}`;
            absentCheckbox.dataset.status = 'absent';
            absentCheckbox.dataset.student = student.name;
            absentWrapper.appendChild(absentCheckbox);
            
            checkboxes.appendChild(presentWrapper);
            checkboxes.appendChild(lateWrapper);
            checkboxes.appendChild(absentWrapper);
            
            studentItem.appendChild(studentInfo);
            studentItem.appendChild(checkboxes);
            
            return studentItem;
        }

        function populateModalStudentsList() {
            const container = document.getElementById('modalStudentsList');
            container.innerHTML = '';
            
            allStudents.forEach(student => {
                const studentItem = createModalStudentItem(student);
                container.appendChild(studentItem);
            });
        }

        // Initialize student lists
        populateStudentList('presentList', students.present);
        populateStudentList('lateList', students.late);
        populateStudentList('absentList', students.absent);
        populateModalStudentsList();

        // Modal functionality
        const editModal = document.getElementById('editModal');
        const editBtn = document.getElementById('editBtn');
        const closeModal = document.getElementById('closeModal');
        const modalCancel = document.getElementById('modalCancel');
        const modalSave = document.getElementById('modalSave');
        const studentSearch = document.getElementById('studentSearch');

        editBtn.addEventListener('click', () => {
            editModal.style.display = 'flex';
        });

        closeModal.addEventListener('click', () => {
            editModal.style.display = 'none';
        });

        modalCancel.addEventListener('click', () => {
            editModal.style.display = 'none';
        });

        editModal.addEventListener('click', (e) => {
            if (e.target === editModal) {
                editModal.style.display = 'none';
            }
        });

        // Checkbox functionality
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('attendance-checkbox')) {
                const studentName = e.target.dataset.student;
                const newStatus = e.target.dataset.status;
                
                // Update student status
                const student = allStudents.find(s => s.name === studentName);
                if (student) {
                    student.status = newStatus;
                }
                
                // Update all checkboxes for this student
                const studentCheckboxes = document.querySelectorAll(`[data-student="${studentName}"]`);
                studentCheckboxes.forEach(cb => {
                    cb.classList.remove('checked');
                    if (cb.dataset.status === newStatus) {
                        cb.classList.add('checked');
                    }
                });
            }
        });

        // Search functionality
        studentSearch.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const studentItems = document.querySelectorAll('.modal-student-item');
            
            studentItems.forEach(item => {
                const studentName = item.querySelector('.modal-student-name').textContent.toLowerCase();
                if (studentName.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        });

        // Bulk actions
        document.querySelectorAll('.attendance-option').forEach(btn => {
            btn.addEventListener('click', () => {
                const status = btn.classList.contains('option-present') ? 'present' :
                              btn.classList.contains('option-late') ? 'late' : 'absent';
                
                // Get visible students (in case search is active)
                const visibleStudents = document.querySelectorAll('.modal-student-item:not([style*="display: none"])');
                
                visibleStudents.forEach(studentItem => {
                    const studentName = studentItem.querySelector('.modal-student-name').textContent;
                    const student = allStudents.find(s => s.name === studentName);
                    if (student) {
                        student.status = status;
                    }
                    
                    // Update checkboxes
                    const checkboxes = studentItem.querySelectorAll('.attendance-checkbox');
                    checkboxes.forEach(cb => {
                        cb.classList.remove('checked');
                        if (cb.dataset.status === status) {
                            cb.classList.add('checked');
                        }
                    });
                });
            });
        });

        modalSave.addEventListener('click', () => {
            // Update the main lists based on new statuses
            const updatedStudents = {
                present: allStudents.filter(s => s.status === 'present').map(s => s.name),
                late: allStudents.filter(s => s.status === 'late').map(s => s.name),
                absent: allStudents.filter(s => s.status === 'absent').map(s => s.name)
            };
            
            // Update counts
            document.querySelector('.count-present').textContent = `${updatedStudents.present.length}/36`;
            document.querySelector('.count-late').textContent = `${updatedStudents.late.length}/36`;
            document.querySelector('.count-absent').textContent = `${updatedStudents.absent.length}/36`;
            
            // Repopulate lists
            populateStudentList('presentList', updatedStudents.present);
            populateStudentList('lateList', updatedStudents.late);
            populateStudentList('absentList', updatedStudents.absent);
            
            // Close modal
            editModal.style.display = 'none';
            
            alert('Attendance updated successfully!');
        });

        // Add button functionality
        document.querySelector('.btn-save').addEventListener('click', function() {
            alert('Attendance summary saved!');
        });

        document.querySelector('.btn-cancel').addEventListener('click', function() {
            if (confirm('Are you sure you want to cancel? Unsaved changes will be lost.')) {
                console.log('Cancelled');
            }
        });

        // Update time every second (for demonstration)
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            }).toLowerCase();
        }

        setInterval(updateCurrentTime, 1000);</script>

</body>
</html>